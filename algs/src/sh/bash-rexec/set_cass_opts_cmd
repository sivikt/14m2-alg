0</dev/null ssh -i ~/key user@$1 << 'ENDSSH'
    local_ip=`ifconfig | sed -En 's/127.0.0.1//;s/.*inet (addr:)?(([0-9]*\.){3}[0-9]*).*/\2/p'`	
    seed_ip="10.0.0.166,10.0.1.145,10.0.2.47"
    cass_opts=/etc/dse/cassandra/cassandra.yaml
    sudo sed -i.sed.bak "s|cluster_name: 'Test Cluster'|cluster_name: 'YCSB_TEST'|g" ${cass_opts}
    sudo sed -i.sed.bak "s|rpc_address: localhost|rpc_address: 0.0.0.0|g" ${cass_opts}
    sudo sed -i.sed.bak "s|listen_address: localhost|listen_address: ${local_ip}|g" ${cass_opts}
    sudo sed -i.sed.bak 's|- seeds: "127.0.0.1"|- seeds: "'"${seed_ip}"'"|g' ${cass_opts}
    sudo sed -i.sed.bak "s|- /var/lib/cassandra/data|- /db/cassandra/data|g" ${cass_opts}
    sudo sed -i.sed.bak "s|commitlog_directory: /var/lib/cassandra/commitlog|commitlog_directory: /db/cassandra/commitlog|g" ${cass_opts}
    sudo sed -i.sed.bak "s|saved_caches_directory: /var/lib/cassandra/saved_caches|saved_caches_directory: /db/cassandra/saved_caches|g" ${cass_opts}
    sudo sed -i.sed.bak "s|endpoint_snitch: com.datastax.bdp.snitch.DseDelegateSnitch|endpoint_snitch: PropertyFileSnitch|g" ${cass_opts}
    sudo sed -i.sed.bak "s|multithreaded_compaction: false|multithreaded_compaction: true|g" ${cass_opts}
    sudo sed -i.sed.bak "s|row_cache_size_in_mb: 0|row_cache_size_in_mb: 61440|g" ${cass_opts}
    sudo sed -i.sed.bak "s|initial_token:|initial_token: 0|g" ${cass_opts}
    sudo sed -i.sed.bak "s|partitioner: org.apache.cassandra.dht.Murmur3Partitioner|partitioner: org.apache.cassandra.dht.RandomPartitioner|g" ${cass_opts}
ENDSSH
